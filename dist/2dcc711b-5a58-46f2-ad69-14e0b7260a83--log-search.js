var __NR_MODULES="object"==typeof __NR_MODULES?__NR_MODULES:{};__NR_MODULES["2dcc711b-5a58-46f2-ad69-14e0b7260a83--log-search"]=function(e){function t(t){for(var a,u,l=t[0],c=t[1],i=t[2],d=0,p=[];d<l.length;d++)u=l[d],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&p.push(r[u][0]),r[u]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(s&&s(t);p.length;)p.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={0:0},o=[];function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.p=window.__NR_PUBLIC_PATH||u.p;var l=window["webpackJsonp__2dcc711b-5a58-46f2-ad69-14e0b7260a83"]=window["webpackJsonp__2dcc711b-5a58-46f2-ad69-14e0b7260a83"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var s=c;return o.push([16,1]),n()}({0:function(e,t){e.exports=React},1:function(e,t){e.exports=__NR1_EXTERNAL_LIB__},16:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var a=n(11),r=n.n(a),o=n(12),u=n.n(o),l=n(4),c=n.n(l),i=n(13),s=n.n(i),d=n(14),p=n.n(d),f=n(7),h=n.n(f),g=n(8),y=n.n(g),m=n(0),E=n.n(m),v=n(2),S=n.n(v),b=n(1),T=n(15);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var C=function(e){s()(n,e);var t=_(n);function n(){var e;return r()(this,n),e=t.call(this),y()(c()(e),"formatTick",(function(e){return e.toLocaleString()})),e.state={entities:null,inputValue:"",defaultValues:[]},e.onSelectChange=e.onSelectChange.bind(c()(e)),e.onTextBoxChange=e.onTextBoxChange.bind(c()(e)),e}return u()(n,[{key:"componentDidMount",value:function(){var e=this;b.UserStorageQuery.query({collection:"logSearchCustomViz",documentId:"logSearchAttributes2"}).then((function(t){var n=t.data;console.info("loading previous data",n),n&&(e.onSelectChange({value:n.attributes}),e.setState({defaultValues:n.attributes}))}))}},{key:"saveData",value:function(e){b.UserStorageMutation.mutate({actionType:b.UserStorageMutation.ACTION_TYPE.WRITE_DOCUMENT,collection:"logSearchCustomViz",documentId:"logSearchAttributes2",document:{attributes:e}})}},{key:"buttonClick",value:function(e,t,n,a,r){r||this.saveData(e);var o={id:"logger.home",urlState:{accountId:n,$sdkVersion:3,query:e.map((function(e){return"".concat(e,":*").concat(t,"*")})).join(" or "),eventTypes:["Log"],attrs:["timestamp","span.id","message","log_summary"]}};a?b.navigation.openStackedNerdlet(o):b.navigation.openNerdlet(o)}},{key:"onSelectChange",value:function(e){var t=e.value;e.constructor===Array&&(t=e.map((function(e){return e.value}))),this.setState({selectedAttributeValues:t})}},{key:"onTextBoxChange",value:function(e){this.setState({searchValue:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.nrqlQueries,a=t.openAsStacked,r=t.enableSelectAll;return n&&n[0]&&n[0].accountId&&n[0].query?E.a.createElement(b.AutoSizer,null,(function(t){t.width,t.height;return E.a.createElement(b.NrqlQuery,{query:n[0].query,accountId:parseInt(n[0].accountId),pollInterval:b.NrqlQuery.AUTO_POLL_INTERVAL},(function(t){var o=t.data,u=t.loading,l=t.error;if(u)return E.a.createElement(b.Spinner,null);if(l)return E.a.createElement(A,null);var c=n[0].accountId,i=o[0].data[0].stringKeys,s=i.map((function(e){return{value:e,label:e}})),d=e.state.defaultValues.map((function(e){return{value:e,label:e}})),p=function(){return r?E.a.createElement(b.Button,{onClick:function(){return e.buttonClick(i,e.state.searchValue,c,a,!0)},type:b.Button.TYPE.PRIMARY},"Search All Attributes"):E.a.createElement(E.a.Fragment,null)};return E.a.createElement(E.a.Fragment,null,E.a.createElement(b.TextField,{type:b.TextField.TYPE.SEARCH,placeholder:"your search term",onChange:e.onTextBoxChange}),E.a.createElement(T.a,{onChange:e.onSelectChange,onSelectResetsInput:!1,isMulti:!0,defaultValue:d,options:s}),E.a.createElement(b.Button,{onClick:function(){return e.buttonClick(e.state.selectedAttributeValues,e.state.searchValue,c,a,!1)},type:b.Button.TYPE.PRIMARY},"Search Selected Attributes"),E.a.createElement(p,null))}))})):E.a.createElement(x,null)}}]),n}(E.a.Component);y()(C,"propTypes",{nrqlQueries:S.a.arrayOf(S.a.shape({accountId:S.a.number,query:S.a.string}))});var x=function(){return E.a.createElement(b.Card,{className:"EmptyState"},E.a.createElement(b.CardBody,{className:"EmptyState-cardBody"},E.a.createElement(b.HeadingText,{spacingType:[b.HeadingText.SPACING_TYPE.SMALL],type:b.HeadingText.TYPE.HEADING_3},"Documentation:"),E.a.createElement(b.HeadingText,{spacingType:[b.HeadingText.SPACING_TYPE.SMALL],type:b.HeadingText.TYPE.HEADING_5},"Enter your Account ID, as well as the following query into the config editor on the right hand side:",E.a.createElement("p",null),E.a.createElement("code",{style:{color:"blue"}},"SELECT keyset() FROM Log SINCE 1 WEEK AGO"),E.a.createElement("p",null),"You can change the SINCE clause to pull in all Log events for your preferred time range Once your Query and Account ID are set, you should see the following options.",E.a.createElement("img",{src:"https://imgur.com/QmZt2QQ.jpg",style:{width:"80%"}}),E.a.createElement("p",null),"The search box should be populated with the string you are looking for across the log attributes you'll select next. The drop down (here with a few options already selected) allows you to pick which Log attributes you'd like to search against.")))},A=function(){return E.a.createElement(b.Card,{className:"ErrorState"},E.a.createElement(b.CardBody,{className:"ErrorState-cardBody"},E.a.createElement(b.HeadingText,{className:"ErrorState-headingText",spacingType:[b.HeadingText.SPACING_TYPE.LARGE],type:b.HeadingText.TYPE.HEADING_3},"Oops! Something went wrong. Double check your configuration.")))}},3:function(e,t){e.exports=ReactDOM}});
//# sourceMappingURL=2dcc711b-5a58-46f2-ad69-14e0b7260a83--log-search.js.map